<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>twrl - Rehashing Xml</title>
        
        <meta charset="UTF-8"/>
        <meta name="google-site-verification" content="m1FBHjRwb73L9re4eVRIILTFytDvEedTsaAHvlQKYi0" />
        
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
        
        <link href="/css/layout.css" rel="stylesheet" type="text/css"/>
        <link href="/css/colour.css" rel="stylesheet" type="text/css"/>
        <link href="/css/code.css" rel="stylesheet" type="text/css"/>
        <link href="/css/typecue.css" rel="stylesheet" type="text/css"/>
	    <link href="/css/colorbox.css" rel="stylesheet" type="text/css"/>
        
        <link href="/atom.xml" rel="alternate" type="application/atom+xml"/>
        <link href="/index.rss" rel="alternate" type="application/rss+xml"/>

	    <link rel="alternate" href="./index.html" id="desktop" media="only screen"/>
        <link rel="alternate" href="./mobile.html" id="phone" media="only screen and (max-device-width: 640px)"/>
	    <link rel="canonical" href="http://twrl.github.com/2012/03/rehashing-xml/"/>

        
        
	<meta name="viewport" content="width=640px"/>

        <!-- typography -->
        <style type="text/css">
        body {
            font-family: "Droid Sans", sans-serif;
        }
        pre {
            font-family: "Droid Sans Mono", monospace;
        }
        </style>
        
        
        <script type="application/javascript" src="/js/require.js" data-main="/js/main"></script>
        
        
        <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'twrl'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function () {
            var s = document.createElement('script'); s.defer = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
        </script>

        <script>
          (function() {
            var cx = '011691644366972436714:mfxko1ksw0i';
            var gcse = document.createElement('script'); gcse.type = 'text/javascript'; gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(gcse, s);
          })();
        </script>
        
    </head>
    <body>

        <div id="l-head" class="cf layout-row c-dark">
            <header id="l-head-title" class="cf layout-cell-l2">
                <h1>twrl</h1>
            </header>
            <nav id="l-head-nav" class="cf layout-cell-l3">
            
                
                <p><a href="/">Home</a></p>
                
                
                
                <p><a href="/about/">About</a></p>
                

                
            
                
                <p><a href="/archive/">Archive</a></p>
                
            
            </nav>
        </div>

	<div id="viewport">

        
        <div class="cf layout-row c-dark" id="l-advnav">
                        <nav id="l-advnav-tags" class="cf layout-cell-l1" data-widget="site/tags">
                <h4><img src="/images/icons/20.png" class="icon"/> Tags</h4>
                <p><span class="tag" data-tagcount="5"><a href="/tags/blog">Blog</a></span> <span class="tag" data-tagcount="5"><a href="/tags/javascript">Javascript</a></span> <span class="tag" data-tagcount="4"><a href="/tags/jekyll">Jekyll</a></span> <span class="tag" data-tagcount="5"><a href="/tags/programming">Programming</a></span> <span class="tag" data-tagcount="4"><a href="/tags/same-sex-marriage">Same-sex&nbsp;Marriage</a></span> <span class="tag" data-tagcount="2"><a href="/tags/security">Security</a></span> <span class="tag" data-tagcount="3"><a href="/tags/semantic-web">Semantic&nbsp;Web</a></span> <span class="tag" data-tagcount="4"><a href="/tags/society">Society</a></span> <span class="tag" data-tagcount="2"><a href="/tags/the-cloud">The&nbsp;Cloud</a></span> <span class="tag" data-tagcount="5"><a href="/tags/web-architecture">Web&nbsp;Architecture</a></span> <span class="tag" data-tagcount="2"><a href="/tags/web-standards">Web&nbsp;Standards</a></span> <span class="tag" data-tagcount="2"><a href="/tags/jquery">jQuery</a></span> 
                <p><a href="/tags">See all tags</a></p>
            </nav>

            
            <nav class="cf layout-cell-l1">
                <h4><img src="/images/icons/10.png" class="icon"/>Related Posts</h4>
                <ul>
                
                    <li><a href="/2012/05/who-am-i-standing-up-to-again/">Who am I standing up to again?</a></li>
                
                    <li><a href="/2012/03/whatever-happened-to-osid/">Whatever Happened To Osid</a></li>
                
                    <li><a href="/2012/08/copyright/">Copyright</a></li>
                
                    <li><a href="/2012/06/javascript-alternatives/">Javascript Alternatives</a></li>
                
                    <li><a href="/2012/09/processor-of-my-dreams/">The Processor of my Dreams</a></li>
                
                    <li><a href="/2013/01/eyes-teeth-and-angry-postcards/">Eyes, Teeth, and Angry Postcards</a></li>
                
                    <li><a href="/2012/03/ajax-and-file-uris/">Ajax and file&#58;// URIs</a></li>
                
                    <li><a href="/2012/08/static-site-generators/">Static Site Generators</a></li>
                
                </ul>
            </nav>
            

            <nav class="cf layout-cell-l1">
                <h4><img src="/images/icons/12.png" class="icon"/>Recent Posts</h4>
                <ul>
                
                    <li><a href="/2013/01/eyes-teeth-and-angry-postcards/">Eyes, Teeth, and Angry Postcards</a></li>
                
                    <li><a href="/2013/01/the-passage-of-time/">The Passage of Time</a></li>
                
                    <li><a href="/2012/09/the-fsf-have-my-goat/">The FSF have my goat!</a></li>
                
                    <li><a href="/2012/09/processor-of-my-dreams/">The Processor of my Dreams</a></li>
                
                    <li><a href="/2012/09/operating-system-development/">Operating System Development</a></li>
                
                    <li><a href="/2012/08/multiple-representations/">Multiple Representations</a></li>
                
                    <li><a href="/2012/08/httprange-14-and-the-dark-resource/">httpRange-14 and the Dark Resource</a></li>
                
                    <li><a href="/2012/08/static-site-generators/">Static Site Generators</a></li>
                
                </ul>
            </nav>

            <div class="cf layout-cell-r2">
                <h4><img src="/images/icons/46.png" class="icon"/>About me</h4>
                <img src="//lh4.googleusercontent.com/-sThPEpky3Eg/AAAAAAAAAAI/AAAAAAAAACg/Ncrk_nbS_5k/s512-c/photo.jpg" style="float: right; max-width: 80px; max-height: 80px; margin: 1ex 1em;"/>
                <p>I used to write code for a living, but since discovered that being a full time student is much more fun. Now studying for a masters in Mathematics, I fill my spare time with tinkering with computers and occasionally getting angry at the news - and write about both of those things here.</p>

                <h4><img src="/images/icons/16.png" class="icon"/>Search</h4>
                <gcse:searchbox-only></gcse:searchbox-only>
                
            </div>


        </div>
        <div class="cf layout-row c-dark" id="l-advnavctl" data-widget="site/advnav" style="display: none;">
            <div class="cf layout-cell-l5" id="l-advnavctl-ctrl">
                <p id="advnavctl-show"><img src="/images/icons/24.png" class="cf llicon"/> Show me more things...</p>
                <p id="advnavctl-hide" style="display:none"><img src="/images/icons/19.png" class="cf llicon"/> Hide this clutter</p>
            </div>
        </div>
        
    
                <article vocab="http://schema.org/" typeof="http://schema.org/BlogPosting" about="">
        <section class="cf layout-row odd">
            <header class="cf layout-cell-l2">
                <h1 property="headline" style="margin-bottom: 0;">Rehashing Xml</h1>
                
                <p style="margin-bottom: 32px;"><span typeof="Breadcrumb"><a href="/archive">Blog</a> &#187; <span rel="child"><span typeof="Breadcrumb"><a href="/2012">2012</a> &#187; <span rel="child"><span typeof="Breadcrumb"><a href="/2012/03">March</a></span></span></span></span></span></p>

                <p><img src="/images/icons/46.png" class="cf rlicon"/>Tom Robbins <a href="https://plus.google.com/114540468191182808437?rel=author"><img src="//ssl.gstatic.com/images/icons/gplus-16.png" alt="Google+" style="border:0;width:16px;height:16px;"/></a></p>
                
                <p><img src="/images/icons/12.png" class="cf rlicon" alt="Publication date - Friday 23 March, 2012"/> <time datetime="2012-03-23" property="datePublished">Friday 23 March, 2012</time></p>
                
                <p><img src="/images/icons/20.png" class="cf rlicon"/> <a rel="http://commontag.org/ns#tagged" href="http://twrl.github.com/tags/web-standards">Web&nbsp;Standards</a>, <a rel="http://commontag.org/ns#tagged" href="http://twrl.github.com/tags/xml">XML</a>
                <p><img src="/images/icons/54.png" class="cf rlicon"/> <a href="http://twrl.github.com/2012/03/rehashing-xml/#disqus_thread">Comments</a></p>
                
                
                <div id="share-widget">

    <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style">
        <a class="addthis_button_google_plusone_share"><img src="/images/icons/social/google_plus.png"/></a>
        <a class="addthis_button_facebook"><img src="/images/icons/social/facebook.png"/></a>
        <a class="addthis_button_linkedin"><img src="/images/icons/social/linkedin.png"/></a>
        <a class="addthis_button_twitter"><img src="/images/icons/social/twitter.png"/></a>
        <a class="addthis_button_email"><img src="/images/icons/social/email.png"/></a>
        <a class="addthis_button"><img src="/images/icons/112.png"/></a>
        <!--a class="addthis_counter addthis_bubble_style"></a-->
        </div>
        <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
        <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-5002f6cf1dbb4c0f"></script>
        <!-- AddThis Button END -->

</div>
                
            </header>
            <div property="articleBody" class="cf layout-cell-l3 content">
                <p>I find it interesting sometimes to consider, if I were starting over and designing <em>xyz-thing</em> from scratch, what would I do differently to what we already have. Recently I&rsquo;ve been considering this with XML.</p>

<p>The trouble with XML is that it&rsquo;s a vast stack of standards. In some ways this is a good thing, because at least in theory it adds a lot of flexibility for different use cases. But it does result in duplication and redundancy, because document authors never know exactly which editions of which specs are being used by which processors and vice versa. How often do we see patterns like the common one for the language attribute on the HTML tag:</p>

<p><code>&lt;html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"&gt;</code></p>

<p>The common <code>id</code> attribute is the same. It sounds like a trivial niggle, but actually it&rsquo;s a design flaw in how these applications (XHTML and XML in this case) are layered one on top of the other.</p>

<p>Then we have the DOM, the XML Infoset, EXI, Canonical XML, XML Namespaces, XML Schema and so on. It&rsquo;s a dizzying array of specs, each with complex demands, which is partly why WHATWG have moved away from the idea of XHTML and put their efforts into HTML5&rsquo;s SGML derived syntax instead. Complying with the existing stack of XML specifications is too onerous, and the specs themselves are not always neatly joined up.</p>

<p>Throw in stuff from the edges of the XML world - the development of IRIs, XRIs and CURIEs, the semantic models of RDF, the multipart MIME types and the data: URI scheme, and so on - and it&rsquo;s a recipe for migraines and sleepless nights.</p>

<p>For all it&rsquo;s flaws however, XML has a whole host of benefits too. There is a very good reason why it&rsquo;s so widely adopted, it&rsquo;s is very flexible and it is human readable, it is (relatively) easy to parse, validate and transform. There various stable and well understood means to map programmatic objects into XML serialisations and back, enabling everything from RPC to Active Record to be done using it.</p>

<p>So if I was going to redesign XML from scratch, what would I do? Well, here are my main thoughts:</p>

<ul>
  <li>Scrap DTDs, completely. I&rsquo;m sure there&rsquo;s been other occasions, but the last time that I can think of when I saw a DTD used seriously was when XHTML 1.1 was published, and XML Schema wasn&rsquo;t considered &lsquo;mature&rsquo; at the point.</li>
  <li>Design the Infoset first. Infoset is supposed to represent the logical model of a document, which XML serialises and DOM provides programmatic access to. Standard XML syntax need not be the only serialisation of an XML Infoset, and the DOM can be made to converge more closely with the underlying model.</li>
  <li>Take a cue from Architecture of the World Wide Web, and consider information items in your infoset as akin to resources. That means that an element might be considered to have a set of zero or more Descriptions, Identifiers, and Representations. Identifiers can be XPath expressions, IDs or any other unique reference to an element. Descriptions are any old metadata, and Representations correspond to different serialisations.</li>
  <li>Design a processing model to go with the infoset. XML Schema defines the PSVI, XSLT defines the post transformation infoset, XML Encryption defines post encryption/decryption infosets. A general model for the transformation of one infoset into the next, and pipelining those transformations, would be very useful.</li>
  <li>Consider all element and attribute names as URIs. Instead of QName we can use URIorCURIE as the type of all namespace qualified names.</li>
  <li>Use processing instructions for instructions to the processor. That means rather than xmlns:foo=&rdquo;&hellip;&rdquo; on an element we insert a processing instruction <?namespace foo="..."?>. If qualified names are now URIs, then we are telling the processor how to expand any CURIEs that we are using. We might also have processing instructions for associating schemas, transforms, even linkbases. Processing instructions can be used to set up the document-specific processing pipeline described above, linking together various flavours of infoset transformation as well as controlling how the infoset is generated from the serialised document. Anything which alters the processing of the document when viewed as a series of parser events. Using attributes for this sort of thing should be limited strictly to when we are giving an element specific instruction.</li>
</ul>

<p>One day I might do a skunk works and draft something along these lines, until then I can but rant.</p>

            </div>
        </section>
        <section class="cf layout-row even">
            <header class="cf layout-cell-l2">
                <h2>Comments</h2>
            </header>
            <div class="cf layout-cell-l3">
                        <div id="disqus_thread"></div>
        <script type="text/javascript">
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'twrl'; // required: replace example with your forum shortname

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </div>
        </section>
        </article>
        
        <div id="l-colophon" class="cf layout-row">
            <footer class="cf layout-cell-l5">
                <p><a rel="license" href="http://creativecommons.org/licenses/by/2.0/uk/deed.en_GB"><img alt="Creative Commons Licence" style="border-width:0" src="http://i.creativecommons.org/l/by/2.0/uk/80x15.png" /></a></p>
                <p>Theme and content by <a xmlns:cc="http://creativecommons.org/ns#" href="http://twrl.github.com" property="cc:attributionName" rel="cc:attributionURL">Tom Robbins</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/2.0/uk/deed.en_GB">Creative Commons Attribution 2.0 UK: England &amp; Wales License</a>.</p>
        		<p>Icons are <a href="http://min.frexy.com/articles/category/milky/">Milky Icons by Frexy</a></p>
        	</footer>
        </div>

	</div>

    </body>
</html>
