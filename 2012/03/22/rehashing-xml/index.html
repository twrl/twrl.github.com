
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" prefix="og: http://ogp.me/ns#">
    <head>
        <title>twrl - Rehashing Xml</title>
        
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
        <link href="/assets/themes/twrl/css/layout.css" rel="stylesheet" type="text/css"/>
        <link href="/assets/themes/twrl/css/colour.css" rel="stylesheet" type="text/css"/>
        <link href="/assets/themes/twrl/css/code.css" rel="stylesheet" type="text/css"/>
        
            <meta property="og:title" content="Rehashing Xml"/>
    <meta property="og:site_name" content="twrl"/>
    <meta property="og:type" content="article"/>
    <meta property="og:url" content="/2012/03/22/rehashing-xml"/>
    <!-- og:image -->
    
    <meta property="og:tag" content="Web Standards"/>
    
    <meta property="og:tag" content="XML"/>
    
        
        <!-- typography -->
        <style type="text/css">
        body {
            font-family: "Droid Sans", sans-serif;
        }
        pre {
            font-family: "Droid Sans Mono", monospace;
        }
        </style>
        
        <script type="application/javascript" src="http://code.jquery.com/jquery-1.7.2.js"></script>
        <script type="application/javascript">
		$(function () {

			$('#l-advnavctl-ctrl').click(function () {
				$('#l-advnav').slideToggle();
				$('#advnavctl-show, #advnavctl-hide').toggle();
			});


		});
		</script>
		
		
		<script type="text/javascript">

          var _gaq = _gaq || [];
          _gaq.push(['_setAccount', 'UA-33400896-1']);
          _gaq.push(['_trackPageview']);
        
          (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
          })();
        
        </script>
        
    </head>
    <body>
    
        <div id="l-head" class="cf layout-row c-dark">
    <header id="l-head-title" class="cf layout-cell-l2">
        <h1>twrl</h1>
    </header>
    <nav id="l-head-nav" class="cf layout-cell-l3">
    
        
        <p><a href="/index.html">Home</a></p>
        
    
        
        <p><a href="/archive.html">Archive</a></p>
        
    
    </nav>
</div>
        
        <div class="cf layout-row c-dark" id="l-advnav" style="display:none">
            <nav class="cf layout-cell-l1">
    <h4><img src="/assets/themes/twrl/icons/20.png" class="icon"/> Tags</h4>
    <p>
        
        <span class="nw"><a href="/tag/Civil Partnership.html">Civil Partnership</a></span>
        
        <span class="nw"><a href="/tag/LGBT.html">LGBT</a></span>
        
        <span class="nw"><a href="/tag/Same-sex Marriage.html">Same-sex Marriage</a></span>
        
        <span class="nw"><a href="/tag/Society.html">Society</a></span>
        
        <span class="nw"><a href="/tag/Web Standards.html">Web Standards</a></span>
        
        <span class="nw"><a href="/tag/XML.html">XML</a></span>
        
        <span class="nw"><a href="/tag/CommonJS.html">CommonJS</a></span>
        
        <span class="nw"><a href="/tag/Javascript.html">Javascript</a></span>
        
        <span class="nw"><a href="/tag/OSID.html">OSID</a></span>
        
        <span class="nw"><a href="/tag/Programming.html">Programming</a></span>
        
        <span class="nw"><a href="/tag/Ajax.html">Ajax</a></span>
        
        <span class="nw"><a href="/tag/jQuery.html">jQuery</a></span>
        
        <span class="nw"><a href="/tag/AMD.html">AMD</a></span>
        
        <span class="nw"><a href="/tag/Web Workers.html">Web Workers</a></span>
        
        <span class="nw"><a href="/tag/The Cloud.html">The Cloud</a></span>
        
        <span class="nw"><a href="/tag/Web Architecture.html">Web Architecture</a></span>
        
    </p>
    <p><a href="/tags.html">See all tags</a></p>
</nav>
            
<nav class="cf layout-cell-l1">
    <h4><img src="/assets/themes/twrl/icons/10.png" class="icon"/>Related Posts</h4>
    <ul>
    
        <li><a href="/2012/05/16/who-am-i-standing-up-to-again">Who am I standing up to again?</a></li>
    
        <li><a href="/2012/03/22/whatever-happened-to-osid">Whatever Happened To Osid</a></li>
    
        <li><a href="/2012/06/11/javascript-alternatives">Javascript Alternatives</a></li>
    
        <li><a href="/2012/03/28/ajax-and-file-uris">Ajax and file&#58;// URIs</a></li>
    
        <li><a href="/2012/05/18/social-networking">Social Networking</a></li>
    
        <li><a href="/2012/03/21/im-fed-up-with-same--sex-marriage">I'm Fed Up With Same-sex Marriage</a></li>
    
        <li><a href="/2012/05/15/wheres-my-data">Where's my Data!</a></li>
    
        <li><a href="/2012/06/14/iconiser">Iconiser</a></li>
    
    </ul>
</nav>

            <nav class="cf layout-cell-l1">
    <h4><img src="/assets/themes/twrl/icons/12.png" class="icon"/>Recent Posts</h4>
    <ul>
    
        <li><a href="/2012/07/14/the-new-edition">The New Edition</a></li>
    
        <li><a href="/2012/06/14/views-dynamic-and-otherwise">Views, dynamic and otherwise</a></li>
    
        <li><a href="/2012/06/14/iconiser">Iconiser</a></li>
    
        <li><a href="/2012/06/11/javascript-alternatives">Javascript Alternatives</a></li>
    
        <li><a href="/2012/05/18/social-networking">Social Networking</a></li>
    
        <li><a href="/2012/05/16/who-am-i-standing-up-to-again">Who am I standing up to again?</a></li>
    
        <li><a href="/2012/05/15/wheres-my-data">Where's my Data!</a></li>
    
        <li><a href="/2012/03/28/initialising-web-workers">Initialising Web Workers</a></li>
    
</nav>
            <div class="cf layout-cell-r2">
    <h4><img src="/assets/themes/twrl/icons/46.png" class="icon"/>About me</h4>
    <img src="//lh4.googleusercontent.com/-sThPEpky3Eg/AAAAAAAAAAI/AAAAAAAAACg/Ncrk_nbS_5k/s512-c/photo.jpg" style="float: left; max-width: 80px; max-height: 80px; margin: 4px;"/>
    <p style="float:right;"><!-- Place this code where you want the badge to render. -->
<a href="//plus.google.com/114540468191182808437?prsrc=3" rel="publisher" style="text-decoration:none;">
<img src="//ssl.gstatic.com/images/icons/gplus-32.png" alt="Google+" style="border:0;width:32px;height:32px;"/></a></p>
    <p>Used to write code for a living, but since discovered that being a full time student is much more fun. Occasional cook, and not so occasional social commentator.</p>
    
</div>
        </div>
        <div class="cf layout-row c-dark" id="l-advnavctl">
            <div class="cf layout-cell-l5" id="l-advnavctl-ctrl">
                <p id="advnavctl-show"><img src="/assets/themes/twrl/icons/24.png" class="icon"/>Show me more things...</p>
                <p id="advnavctl-hide" style="display:none"><img src="/assets/themes/twrl/icons/19.png" class="icon"/>Hide this clutter</p>
            </div>
        </div>
    
        
<article class="cf layout-row odd" xmlns:dc="http://purl.org/dc/elements/1.1/">
    <header class="cf layout-cell-l2">
        <h1 property="dc:title">Rehashing Xml</h1>
        <p><span property="dc:date" content="2012-03-22">Thursday 22 March, 2012</span> <img src="/assets/themes/twrl/icons/12.png" class="icon"/></p>
        <p><a rel="dc:subject" href="/tag/Web Standards.html">Web Standards</a>, <a rel="dc:subject" href="/tag/XML.html">XML</a> <img src="/assets/themes/twrl/icons/20.png" class="icon"/></p>
        
        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style">
        <a class="addthis_button_preferred_1"></a>
        <a class="addthis_button_preferred_2"></a>
        <a class="addthis_button_preferred_3"></a>
        <a class="addthis_button_preferred_4"></a>
        <a class="addthis_button_compact"></a>
        <a class="addthis_counter addthis_bubble_style"></a>
        </div>
        <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
        <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-5002f6cf1dbb4c0f"></script>
        <!-- AddThis Button END -->
        
    </header>
    <div class="cf layout-cell-l3 content">
        <p>I find it interesting sometimes to consider, if I were starting over and designing <em>xyz-thing</em> from scratch, what would I do differently to what we already have. Recently I&#8217;ve been considering this with XML.</p>

<p>The trouble with XML is that it&#8217;s a vast stack of standards. In some ways this is a good thing, because at least in theory it adds a lot of flexibility for different use cases. But it does result in duplication and redundancy, because document authors never know exactly which editions of which specs are being used by which processors and vice versa. How often do we see patterns like the common one for the language attribute on the HTML tag:</p>

<p><code>&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot; lang=&quot;en&quot; xml:lang=&quot;en&quot;&gt;</code></p>

<p>The common <code>id</code> attribute is the same. It sounds like a trivial niggle, but actually it&#8217;s a design flaw in how these applications (XHTML and XML in this case) are layered one on top of the other.</p>

<p>Then we have the DOM, the XML Infoset, EXI, Canonical XML, XML Namespaces, XML Schema and so on. It&#8217;s a dizzying array of specs, each with complex demands, which is partly why WHATWG have moved away from the idea of XHTML and put their efforts into HTML5&#8217;s SGML derived syntax instead. Complying with the existing stack of XML specifications is too onerous, and the specs themselves are not always neatly joined up.</p>

<p>Throw in stuff from the edges of the XML world - the development of IRIs, XRIs and CURIEs, the semantic models of RDF, the multipart MIME types and the data: URI scheme, and so on - and it&#8217;s a recipe for migraines and sleepless nights.</p>

<p>For all it&#8217;s flaws however, XML has a whole host of benefits too. There is a very good reason why it&#8217;s so widely adopted, it&#8217;s is very flexible and it is human readable, it is (relatively) easy to parse, validate and transform. There various stable and well understood means to map programmatic objects into XML serialisations and back, enabling everything from RPC to Active Record to be done using it.</p>

<p>So if I was going to redesign XML from scratch, what would I do? Well, here are my main thoughts:</p>

<ul>
<li>Scrap DTDs, completely. I&#8217;m sure there&#8217;s been other occasions, but the last time that I can think of when I saw a DTD used seriously was when XHTML 1.1 was published, and XML Schema wasn&#8217;t considered &#8216;mature&#8217; at the point.</li>

<li>Design the Infoset first. Infoset is supposed to represent the logical model of a document, which XML serialises and DOM provides programmatic access to. Standard XML syntax need not be the only serialisation of an XML Infoset, and the DOM can be made to converge more closely with the underlying model.</li>

<li>Take a cue from Architecture of the World Wide Web, and consider information items in your infoset as akin to resources. That means that an element might be considered to have a set of zero or more Descriptions, Identifiers, and Representations. Identifiers can be XPath expressions, IDs or any other unique reference to an element. Descriptions are any old metadata, and Representations correspond to different serialisations.</li>

<li>Design a processing model to go with the infoset. XML Schema defines the PSVI, XSLT defines the post transformation infoset, XML Encryption defines post encryption/decryption infosets. A general model for the transformation of one infoset into the next, and pipelining those transformations, would be very useful.</li>

<li>Consider all element and attribute names as URIs. Instead of QName we can use URIorCURIE as the type of all namespace qualified names.</li>

<li>Use processing instructions for instructions to the processor. That means rather than xmlns:foo=&#8221;&#8230;&#8221; on an element we insert a processing instruction <?namespace foo="..."?>. If qualified names are now URIs, then we are telling the processor how to expand any CURIEs that we are using. We might also have processing instructions for associating schemas, transforms, even linkbases. Processing instructions can be used to set up the document-specific processing pipeline described above, linking together various flavours of infoset transformation as well as controlling how the infoset is generated from the serialised document. Anything which alters the processing of the document when viewed as a series of parser events. Using attributes for this sort of thing should be limited strictly to when we are giving an element specific instruction.</li>
</ul>

<p>One day I might do a skunk works and draft something along these lines, until then I can but rant.</p>
    </div>
</article>

        
        <div id="l-colophon" class="cf layout-row">
    <footer class="cf layout-cell-l5">
        <p>Theme and content Copyright &copy; Tom Robbins 2012.</p>
		<p>Icons are <a href="http://min.frexy.com/articles/category/milky/">Milky Icons by Frexy</a></p>
	</footer>
</div>
    
    </body>
</html>
