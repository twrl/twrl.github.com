<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>twrl - Iconiser</title>
        
        <meta charset="UTF-8"/>
        
        <link href='http://fonts.googleapis.com/css?family=Droid+Sans:400,700|Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
        <link href="/css/layout.css" rel="stylesheet" type="text/css"/>
        <link href="/css/colour.css" rel="stylesheet" type="text/css"/>
        <link href="/css/code.css" rel="stylesheet" type="text/css"/>
        
        <link href="/css/typecue.css" rel="stylesheet" type="text/css"/>
        <link href="/css/colorbox.css" rel="stylesheet" type="text/css"/>
        
        <link href="/atom.xml" rel="alternate" type="application/atom+xml"/>
        <link href="/index.rss" rel="alternate" type="application/rss+xml"/>
        
        <!-- typography -->
        <style type="text/css">
        body {
            font-family: "Droid Sans", sans-serif;
        }
        pre {
            font-family: "Droid Sans Mono", monospace;
        }
        </style>
        
        
        <script type="application/javascript" src="/js/require.js" data-main="/js/main"></script>
        
    </head>
    <body>
    
        <div id="l-head" class="cf layout-row c-dark">
            <header id="l-head-title" class="cf layout-cell-l2">
                <h1>twrl</h1>
            </header>
            <nav id="l-head-nav" class="cf layout-cell-l3">
            
                
                <p><a href="/">Home</a></p>
                
                
                
            
                
                <p><a href="/archive/">Archive</a></p>
                
                
                
            
            </nav>
        </div>
        
        <div class="cf layout-row c-dark" id="l-advnav" style="display:none">
                        <nav id="l-advnav-tags" class="cf layout-cell-l1" data-widget="site/tags">
                <h4><img src="/images/icons/20.png" class="icon"/> Tags</h4>
                <p><span class="tag" data-tagcount="1"><a href="/tags/amd">AMD</a></span> <span class="tag" data-tagcount="1"><a href="/tags/ajax">Ajax</a></span> <span class="tag" data-tagcount="3"><a href="/tags/blog">Blog</a></span> <span class="tag" data-tagcount="1"><a href="/tags/blogger">Blogger</a></span> <span class="tag" data-tagcount="1"><a href="/tags/civil-partnership">Civil&nbsp;Partnership</a></span> <span class="tag" data-tagcount="1"><a href="/tags/commonjs">CommonJS</a></span> <span class="tag" data-tagcount="1"><a href="/tags/copyright">Copyright</a></span> <span class="tag" data-tagcount="1"><a href="/tags/drm">DRM</a></span> <span class="tag" data-tagcount="1"><a href="/tags/diaspora">Diaspora</a></span> <span class="tag" data-tagcount="1"><a href="/tags/digital-content">Digital&nbsp;Content</a></span> <span class="tag" data-tagcount="1"><a href="/tags/dynamic-views">Dynamic&nbsp;Views</a></span> <span class="tag" data-tagcount="1"><a href="/tags/facebook">Facebook</a></span> <span class="tag" data-tagcount="1"><a href="/tags/google">Google</a></span> <span class="tag" data-tagcount="1"><a href="/tags/intellectual-property">Intellectual&nbsp;Property</a></span> <span class="tag" data-tagcount="5"><a href="/tags/javascript">Javascript</a></span> <span class="tag" data-tagcount="2"><a href="/tags/jekyll">Jekyll</a></span> <span class="tag" data-tagcount="1"><a href="/tags/lgbt">LGBT</a></span> <span class="tag" data-tagcount="1"><a href="/tags/media">Media</a></span> <span class="tag" data-tagcount="1"><a href="/tags/microdata">Microdata</a></span> <span class="tag" data-tagcount="1"><a href="/tags/osid">OSID</a></span> <span class="tag" data-tagcount="1"><a href="/tags/pki">PKI</a></span> <span class="tag" data-tagcount="3"><a href="/tags/programming">Programming</a></span> <span class="tag" data-tagcount="1"><a href="/tags/rdfa">RDFa</a></span> <span class="tag" data-tagcount="2"><a href="/tags/same-sex-marriage">Same-sex&nbsp;Marriage</a></span> <span class="tag" data-tagcount="1"><a href="/tags/security">Security</a></span> <span class="tag" data-tagcount="2"><a href="/tags/semantic-web">Semantic&nbsp;Web</a></span> <span class="tag" data-tagcount="1"><a href="/tags/social-networking">Social&nbsp;Networking</a></span> <span class="tag" data-tagcount="2"><a href="/tags/society">Society</a></span> <span class="tag" data-tagcount="2"><a href="/tags/the-cloud">The&nbsp;Cloud</a></span> <span class="tag" data-tagcount="3"><a href="/tags/web-architecture">Web&nbsp;Architecture</a></span> <span class="tag" data-tagcount="2"><a href="/tags/web-standards">Web&nbsp;Standards</a></span> <span class="tag" data-tagcount="1"><a href="/tags/web-workers">Web&nbsp;Workers</a></span> <span class="tag" data-tagcount="1"><a href="/tags/xmbc">XMBC</a></span> <span class="tag" data-tagcount="1"><a href="/tags/xml">XML</a></span> <span class="tag" data-tagcount="1"><a href="/tags/itunes">iTunes</a></span> <span class="tag" data-tagcount="2"><a href="/tags/jquery">jQuery</a></span> 
                <p><a href="/tags">See all tags</a></p>
            </nav>
            
            <nav class="cf layout-cell-l1">
                <h4><img src="/images/icons/10.png" class="icon"/>Related Posts</h4>
                <ul>
                
                    <li><a href="/2012/03/ajax-and-file-uris/">Ajax and file&#58;// URIs</a></li>
                
                    <li><a href="/2012/03/initialising-web-workers/">Initialising Web Workers</a></li>
                
                    <li><a href="/2012/03/rehashing-xml/">Rehashing Xml</a></li>
                
                    <li><a href="/2012/05/who-am-i-standing-up-to-again/">Who am I standing up to again?</a></li>
                
                    <li><a href="/2012/07/the-new-setup/">About This New Setup</a></li>
                
                    <li><a href="/2012/05/wheres-my-data/">Where's my Data!</a></li>
                
                    <li><a href="/2012/08/copyright/">Copyright</a></li>
                
                    <li><a href="/2012/05/social-networking/">Social Networking</a></li>
                
                    <li><a href="/2012/06/javascript-alternatives/">Javascript Alternatives</a></li>
                
                    <li><a href="/2012/07/is-the-public-key-infrastructure-collapsing/">Is the Public Key Infrastructure Collapsing?</a></li>
                
                </ul>
            </nav>
            
            <nav class="cf layout-cell-l1">
                <h4><img src="/images/icons/12.png" class="icon"/>Recent Posts</h4>
                <ul>
                
                    <li><a href="/2012/08/XBMC/">Media Centre</a></li>
                
                    <li><a href="/2012/08/microdata-vs-rdfa/">Microdata vs RDFa</a></li>
                
                    <li><a href="/2012/08/copyright/">Copyright</a></li>
                
                    <li><a href="/2012/07/is-the-public-key-infrastructure-collapsing/">Is the Public Key Infrastructure Collapsing?</a></li>
                
                    <li><a href="/2012/07/the-new-setup/">About This New Setup</a></li>
                
                    <li><a href="/2012/07/the-new-edition/">The New Edition</a></li>
                
                    <li><a href="/2012/06/views-dynamic-and-otherwise/">Views, dynamic and otherwise</a></li>
                
                    <li><a href="/2012/06/iconiser/">Iconiser</a></li>
                
                    <li><a href="/2012/06/javascript-alternatives/">Javascript Alternatives</a></li>
                
                    <li><a href="/2012/05/social-networking/">Social Networking</a></li>
                
                </ul>
            </nav>
            <div class="cf layout-cell-r2">
                <h4><img src="/images/icons/46.png" class="icon"/>About me</h4>
                <img src="//lh4.googleusercontent.com/-sThPEpky3Eg/AAAAAAAAAAI/AAAAAAAAACg/Ncrk_nbS_5k/s512-c/photo.jpg" style="float: left; max-width: 80px; max-height: 80px; margin: 4px;"/>
                <p style="float:right;"><a href="//plus.google.com/114540468191182808437?prsrc=3" rel="publisher" style="text-decoration:none;">
            <img src="//ssl.gstatic.com/images/icons/gplus-32.png" alt="Google+" style="border:0;width:32px;height:32px;"/></a></p>
                <p>I used to write code for a living, but since discovered that being a full time student is much more fun. Now studying for a masters in Mathematics, I fill my spare time with tinkering with computers and occasionally getting angry at the news - and write about both of those things here.</p>
                
            </div>

        </div>
        <div class="cf layout-row c-dark" id="l-advnavctl" data-widget="site/advnav">
            <div class="cf layout-cell-l5" id="l-advnavctl-ctrl">
                <p id="advnavctl-show"><img src="/images/icons/24.png" class="icon"/> Show me more things...</p>
                <p id="advnavctl-hide" style="display:none"><img src="/images/icons/19.png" class="icon"/> Hide this clutter</p>
            </div>
        </div>
        
    
                <article itemscope itemtype="http://schema.org/BlogPosting" class="cf layout-row odd">
            <header class="cf layout-cell-l2">
                <h1 itemprop="headline">Iconiser</h1>
                <p><time datetime="2012-06-14" itemprop="datePublished">Thursday 14 June, 2012</time> <img src="/images/icons/12.png" class="icon" alt="Publication date - Thursday 14 June, 2012"/></p>
                
                <p><span itemprop="keywords"><a href="/tags/javascript">Javascript</a>, <a href="/tags/jquery">jQuery</a></span> <img src="/images/icons/20.png" class="icon" alt="Tags - Javascript, jQuery"/></p>
                
                
                <p><a href="/assets/attachments/iconiser.js">iconiser.js</a> <img src="/images/icons/131.png" class="icon" alt="Attachment - iconiser.js"/></p>
                
                
                
                <!-- AddThis Button BEGIN
                <div class="addthis_toolbox addthis_default_style">
                <a class="addthis_button_preferred_1"></a>
                <a class="addthis_button_preferred_2"></a>
                <a class="addthis_button_preferred_3"></a>
                <a class="addthis_button_preferred_4"></a>
                <a class="addthis_button_compact"></a>
                <a class="addthis_counter addthis_bubble_style"></a>
                </div>
                <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
                <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-5002f6cf1dbb4c0f"></script>
                AddThis Button END -->
                
                <div id="share-widget">

    <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style">
        <a class="addthis_button_google_plusone_share"><img src="/images/icons/social/google_plus.png"/></a>
        <a class="addthis_button_facebook"><img src="/images/icons/social/facebook.png"/></a>
        <a class="addthis_button_linkedin"><img src="/images/icons/social/linkedin.png"/></a>
        <a class="addthis_button_twitter"><img src="/images/icons/social/twitter.png"/></a>
        <a class="addthis_button_email"><img src="/images/icons/social/email.png"/></a>
        <a class="addthis_button"><img src="/images/icons/112.png" style="width: 32px; height: 32px;"/></a>
        <!--a class="addthis_counter addthis_bubble_style"></a-->
        </div>
        <script type="text/javascript">var addthis_config = {"data_track_addressbar":true};</script>
        <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=ra-5002f6cf1dbb4c0f"></script>
        <!-- AddThis Button END -->

</div>
                
            </header>
            <div itemprop="articleBody" class="cf layout-cell-l3 content">
                <p>This is a useful titbit for anyone who is working with blogger templates or other things that severely limit your ability to host and serve lots of little files. I just hacked it together now to implement the new theme I&rsquo;m writing for this blog.</p>

<p>I&rsquo;m using quite a few icons in the new theme and I wanted to embed them as data: URIs. The trouble is, I&rsquo;m using the same icon in several places which means duplication, and having great blocks of base64 embedded in the code is making it all unreadable. So I&rsquo;ve written a tiny jQuery plugin to maintain a catalogue of named icons, and then replace the shorthand URIs that I&rsquo;m using with the full one.</p>

<p>Here&rsquo;s the code:</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"> <a href="#n1" name="n1">1</a></span>(<span class="keyword">function</span> (<span class="predefined">$</span>) {
<span class="line-numbers"> <a href="#n2" name="n2">2</a></span>
<span class="line-numbers"> <a href="#n3" name="n3">3</a></span>    <span class="predefined">$</span>.<span class="function">iconise</span> = <span class="keyword">function</span> (name, data) {
<span class="line-numbers"> <a href="#n4" name="n4">4</a></span>        <span class="predefined">$</span>.iconise.data[name] = data;
<span class="line-numbers"> <a href="#n5" name="n5">5</a></span>    }
<span class="line-numbers"> <a href="#n6" name="n6">6</a></span>
<span class="line-numbers"> <a href="#n7" name="n7">7</a></span>    <span class="predefined">$</span>.iconise.data = {};
<span class="line-numbers"> <a href="#n8" name="n8">8</a></span>
<span class="line-numbers"> <a href="#n9" name="n9">9</a></span>    <span class="predefined">$</span>.fn.<span class="function">iconise</span> = <span class="keyword">function</span> () {
<span class="line-numbers"><strong><a href="#n10" name="n10">10</a></strong></span>        <span class="predefined">$</span>(<span class="string"><span class="delimiter">'</span><span class="content">img</span><span class="delimiter">'</span></span>, <span class="local-variable">this</span>).each(<span class="keyword">function</span> () {
<span class="line-numbers"><a href="#n11" name="n11">11</a></span>            <span class="keyword">var</span> src = <span class="predefined">$</span>(<span class="local-variable">this</span>).attr(src);
<span class="line-numbers"><a href="#n12" name="n12">12</a></span>            <span class="keyword">if</span> (src.indexOf(<span class="string"><span class="delimiter">'</span><span class="content">iconise:</span><span class="delimiter">'</span></span>) == <span class="integer">0</span>) {
<span class="line-numbers"><a href="#n13" name="n13">13</a></span>                <span class="keyword">var</span> icon = src.substring(<span class="integer">8</span>);
<span class="line-numbers"><a href="#n14" name="n14">14</a></span>                <span class="keyword">if</span> (<span class="predefined">$</span>.iconise.data[icon] !== <span class="predefined-constant">undefined</span>) {
<span class="line-numbers"><a href="#n15" name="n15">15</a></span>                    <span class="predefined">$</span>(<span class="local-variable">this</span>).attr(<span class="string"><span class="delimiter">'</span><span class="content">src</span><span class="delimiter">'</span></span>, <span class="predefined">$</span>.iconise.data[icon]);
<span class="line-numbers"><a href="#n16" name="n16">16</a></span>                }
<span class="line-numbers"><a href="#n17" name="n17">17</a></span>            }
<span class="line-numbers"><a href="#n18" name="n18">18</a></span>        })
<span class="line-numbers"><a href="#n19" name="n19">19</a></span>    };
<span class="line-numbers"><strong><a href="#n20" name="n20">20</a></strong></span>
<span class="line-numbers"><a href="#n21" name="n21">21</a></span>})(jQuery);
</pre></div>
</div>
</div>

<p>Then to use it you need to build a database of icons. You simply call the iconise function to associate a name to a data: uri</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="predefined">$</span>.iconise(<span class="string"><span class="delimiter">'</span><span class="content">myIcon</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">data:image/png;base64,/*...base64 encoded image...*/</span><span class="delimiter">'</span></span>);
</pre></div>
</div>
</div>

<p>And finally, you can reference your icon like this</p>

<div><div class="CodeRay">
  <div class="code"><pre><span class="line-numbers"><a href="#n1" name="n1">1</a></span><span class="tag">&lt;img</span> <span class="attribute-name">src</span>=<span class="string"><span class="delimiter">'</span><span class="content">iconise:myIcon</span><span class="delimiter">'</span></span> <span class="tag">/&gt;</span>
</pre></div>
</div>
</div>

<p>This is a bit of a quick and dirty hack, and it will certainly not degrade gracefully. But it might come in handy.</p>

            </div>
        </article>
        
        <div id="l-colophon" class="cf layout-row">
            <footer class="cf layout-cell-l5">
                <p><a rel="license" href="http://creativecommons.org/licenses/by/2.0/uk/deed.en_GB"><img alt="Creative Commons Licence" style="border-width:0" src="http://i.creativecommons.org/l/by/2.0/uk/80x15.png" /></a></p>
                <p>Theme and content by <a xmlns:cc="http://creativecommons.org/ns#" href="http://twrl.github.com" property="cc:attributionName" rel="cc:attributionURL">Tom Robbins</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/2.0/uk/deed.en_GB">Creative Commons Attribution 2.0 UK: England &amp; Wales License</a>.</p>
        		<p>Icons are <a href="http://min.frexy.com/articles/category/milky/">Milky Icons by Frexy</a></p>
        	</footer>
        </div>
    
    </body>
</html>